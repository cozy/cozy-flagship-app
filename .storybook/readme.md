# Storybook usage

## Development

`yarn storybook` will launch the application in storybook mode. This will allow you to view all the components in the application and their various states.

`yarn storybook:watch` will check for changes and update `storybook.requires.js` file. This file is generated by the `yarn storybook:update` command and contains all the components that are used in the application. If you add a new component, you will need to press `R` and reload the app to see it in the storybook. It is not needed to watch for changes if you are not adding new components.

To sum up, you will need to run `yarn storybook:watch` in a terminal and `yarn storybook` in another terminal.

Refer to the [Storybook documentation](https://github.com/storybookjs/react-native) for more information.

## Updating the stories

`yarn storybook:update` will generate the `storybook.requires.js` file. This file contains all the components that are used in the application. This is useful if for some reason you want to update the stories register without having to start the app and the watcher.

# Tips and tricks

- When using storybook, it is a good idea to use a device with a large screen. This will allow you to see the components in a larger format and will make it easier to spot issues. You can for instance use the "Fold Out" device with Android Studio. Do not use a tablet emulator though, as the application won't work.

# Limitations

- Currently story Decorators will not trigger an UI rerender in Storybook (unknown reason). It is required to update the story or the component featured in the story to see the changes in a component decorator. Thankfully, this is not a big issue as the decorators are not supposed to change often.

# Troubleshooting:

- If you get the following error: `Invariant Violation: TurboModuleRegistry.getEnforcing(...): 'RNCDatePicker' could not be found.`, that means you have to build the app again. Storybook uses this native module and it needs to be included into the app.

- On some environments (for instance WSL with an Ubuntu backend and Windows front-end), you might need to add the host IP to the start command in react-native, like this: `yarn storybook --host=127.0.0.1`. Most likely you will also have to `adb reverse tcp:8081 tcp:8081` to be able to reach the storybook server from the emulator.
